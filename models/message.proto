syntax = "proto2";

/**
Data structures
 */
message Ballot {
    required int32 id = 1;
    required int32 ballotNum = 2;
}
message PValue {
    required Ballot ballot = 1;
    required string payload = 2;
}

/**
Official Paxos protocol messages: p1a, p1b, p2a, p2b
 */
message ProposerToAcceptor {
    enum Type {
        p1a = 1;
        p2a = 2;
    }

    required Type type = 1;
    required Ballot ballot = 2;
    optional int32 slot = 3;
    optional string payload = 4;
}
message AcceptorToProposer {
    enum Type {
        p1b = 1;
        p2b = 2;
    }

    required Type type = 1;
    required Ballot ballot = 2;
    repeated PValue log = 3; //TODO Acceptors send back whole log in P1B. Could be bad for bandwidth
}

message IAmLeader {
    required int32 id = 1;
}